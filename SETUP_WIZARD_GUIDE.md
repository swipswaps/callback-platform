# üöÄ Twilio Setup Wizard Guide

## Overview

The Callback Platform now includes a **guided setup wizard** that walks you through configuring Twilio credentials step-by-step. No more manual `.env` file editing!

## Accessing the Setup Wizard

### Option 1: From the Callback Form
When Twilio is not configured, you'll see a yellow notice on the main callback form:

```
‚öôÔ∏è Twilio Not Configured
To enable real phone callbacks, you need to configure Twilio credentials.
[üöÄ Run Setup Wizard]
```

Click the "Run Setup Wizard" button.

### Option 2: Direct URL
Navigate directly to the setup wizard:
- **Local**: http://localhost:3000/setup.html
- **GitHub Pages**: https://yourusername.github.io/callback-platform/setup.html

## Setup Wizard Steps

### Step 1: Welcome
- Overview of what you'll need
- Twilio free trial information ($15.50 credit, 1 free number)
- Estimated time: 10-15 minutes

### Step 2: Create Twilio Account
- Click "Open Twilio Signup" to create account in new tab
- Fill in email, password, phone number
- Verify your phone number
- Return to wizard and click "Next"

### Step 3: Get Credentials
- Click "Open Twilio Console" to access your dashboard
- Copy your **Account SID** (starts with "AC")
- Click "Show" next to Auth Token and copy it
- Paste both values in the wizard
- Click "Next"

### Step 4: Get Phone Number
- Click "Get Twilio Phone Number" to open phone numbers page
- Click "Buy a number" or "Get a number"
- Select country (United States recommended)
- Check "Voice" capability (required)
- Check "SMS" capability (optional, for fallback)
- Click "Search" and choose a number
- Click "Buy" (free on trial account)
- Copy your new number and paste it in the wizard
- Format: +1XXXXXXXXXX (include country code)
- Click "Next"

### Step 5: Verify Your Phone Number
- Click "Verify Your Phone Number" to open verified numbers page
- Click "Add a new number" or "Verify a number"
- Enter **your personal phone number** (where you want to receive callbacks)
- Choose verification method: Call or SMS
- Enter the verification code you receive
- Copy your verified number and paste it in the wizard
- Click "Next"

### Step 6: Review & Save
- Review your configuration summary
- Click "Save Configuration"
- Wizard will:
  - Validate credentials
  - Save to `.env` file in project root
  - Show success message with next steps

## After Configuration

### Restart Backend
The backend must be restarted to load the new credentials:

```bash
./scripts/stop.sh && ./scripts/start.sh
```

Or manually:
```bash
cd backend
python app.py
```

### Verify Configuration
Check that Twilio is now configured:

```bash
curl http://localhost:8501/health | jq '.twilio_configured'
# Should return: true
```

### Test Callback
1. Go to http://localhost:3000
2. Fill in the callback form
3. Submit a test request
4. Your phone should ring!

## Configuration File

The wizard creates a `.env` file in your project root:

```env
# Callback Service Environment Configuration
# Generated by Twilio Setup Wizard on 2026-01-19T23:03:03.339410

# ============================================================
# TWILIO CONFIGURATION
# ============================================================
TWILIO_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_NUMBER=+15551234567

# ============================================================
# BUSINESS CONFIGURATION
# ============================================================
BUSINESS_NUMBER=+15557654321

# ... (additional configuration)
```

## Security Notes

‚úÖ **Protected by .gitignore**: The `.env` file is automatically excluded from git commits  
‚úÖ **Auth Token Masked**: Only last 4 characters shown in review  
‚úÖ **No Plaintext Logging**: Credentials never logged in plaintext  

## Troubleshooting

### "Backend not available" Error
- Make sure backend is running: `./scripts/start.sh`
- Check backend health: `curl http://localhost:8501/health`

### Configuration Saved But Not Working
- Restart backend to load new credentials
- Check `.env` file exists: `ls -la .env`
- Verify credentials in Twilio Console

### Manual Configuration Fallback
If the wizard fails, you can:
1. Click "Download .env File" button in the wizard
2. Place the downloaded file in your project root
3. Restart the backend

Or manually:
1. Copy `.env.example` to `.env`
2. Edit with your credentials
3. Restart the backend

## API Endpoint

The wizard uses the `/api/configure` endpoint:

```bash
POST http://localhost:8501/api/configure
Content-Type: application/json

{
  "TWILIO_SID": "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "TWILIO_AUTH_TOKEN": "your_auth_token",
  "TWILIO_NUMBER": "+15551234567",
  "BUSINESS_NUMBER": "+15557654321",
  "FRONTEND_URL": "http://localhost:3000",
  "RECAPTCHA_SECRET": "6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe"
}
```

Response:
```json
{
  "success": true,
  "message": "Configuration saved successfully",
  "env_path": "/path/to/project/.env",
  "restart_required": true
}
```

## Files Added

- `frontend/setup.html` - Setup wizard UI
- `frontend/setup.js` - Wizard logic and navigation
- `frontend/index.html` - Added setup wizard notice
- `frontend/app.js` - Added Twilio configuration check
- `backend/app.py` - Added `/api/configure` endpoint

---

**The setup wizard makes Twilio configuration accessible to non-technical users! üéâ**

